---
title: 图像标记逻辑修改须知
tag: img, tip
time: 2020/3/13
description: 优化图像标记，绘制框的逻辑
---

## 圆圈点标记

### 单个嫌疑框（系统当前考核形式）

1）学员作答时，展示形式是 [圆圈+点]。颜色为 [红]
2）非复杂模式下（不用选择知识点），不显示文字，没有可删除[按钮]
3）复杂模式下，选择知识点后，将知识点文字展示在圆圈点左侧，展示形式为 [边框+小三角]。边框颜色为 [清华紫]，文字颜色为 [白]，宽度为 [2px]
4）复杂模式下，如果知识点文字 [>10]，截断显示
5）用户回查之前作答记录时，圆圈点颜色改为 正确 [深绿] 错误 [靛蓝]
6）**另**：切片上，不能使用点标记，因为要用画框形式获取 密度原子系数 相关值
7）**注**：`升级功能`，支持全程记录用户对单幅图像多次标记的过程，可用作用户能力分析指标。考虑到乱点行为，只采集最后10~20个有效点，但记录总数。
  回看时，支持还原用户当时作答情景 [收费点🤣]

### 多个嫌疑框（在多嫌疑框图像考题基础上）

1）可绘制多个嫌疑框，显示形式变为 [⭕圆圈] + [❌删除按钮]。
2）删除按钮默认颜色为 [淡蓝]，当鼠标滑动上去时，颜色变为 [红]
3）点击删除删除按钮，将会将此处标记的嫌疑物圆圈删除
4）复杂模式下，相关逻辑，同上
5）结果判断时，考虑到复杂模式，标记时不返回判断结果，在切换下一题前 [统一获取] 所有标记框结果。
6）考虑到判断结果由后台返回，可能会被用户发现。可以 [尝试] 将结果进行加密，然后再由我这边解密，解密方法放在皮志鹏加密的js中。
7）**注**：不再显示默认的app.png图像（红色框）。判断依据采用用户（讲师）制作时绘制的嫌疑框，包含 [坐标+文字+id]

## 方框标记

> 不显示自带的 app.png 嫌疑框

### 讲师标记（用于制作多嫌疑框图像考题）

1）支持多框标记
2）用户绘制时，展示形式为，简单 [矩形框]，颜色为 [带渐变的红色]。右上角有 [删除按钮]
3）删除按钮默认颜色为 [淡蓝]，当鼠标滑动上去时，颜色变为 [红]
4）必须选择危险物知识点，入库记录。同时将文字绘制在矩形框中。文字颜色为 [白色]
5）选择的危险品知识点文字长度 [>10] 且不能 [两行内] 显示，截断显示
6）用户（讲师）回看标记的图像考题时，嫌疑框右上角 [没有] 删除按钮。矩形框颜色展示形式为 [矩形] + 边角处有三角形、圆环点缀。颜色 [渐变紫+渐变青蓝]
7）用户（学员）在查看讲师标记的嫌疑框时（场景是回查答案），作为 [正确答案] 显示时，展现形式为 [矩形框] + [左上角右下角加粗线条点缀]。颜色为 [红]
8）**注**：只针对DR图像，不支持切片场景下进行多框标记

## 另外添加

### 切片只有鼠标中键点击一下时

由之前的逻辑：返回密度原子系数 [0,0]; 绘制之前 [获取密度原子系数的框]
改为：返回密度原子系数 [0,0]; **删除**之前 [获取密度原子系数的框]
