<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>岁月神偷</title>
    <link rel="stylesheet" href="../lib/bootstrap/css/bootstrap.css">
    <link rel="stylesheet" href="../css/index.css"/>
    <link rel="stylesheet" href="../css/oop.css"/>
</head>
<body>
    <div class="header">
        越过山丘
        <h2>走吧走吧，请大声说出来</h2>
    </div>
    <div id="title">
        <h1>有啥吃啊</h1>
        <p>皮蛋瘦肉粥<a>烧卖</a></p>
    </div>
    <div class="container">
        <div class="col-md-6">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h5 class="panle-title">
                        我就是爱音乐，别叫我停下来
                        <span class="glyphicon glyphicon-yen pull-right"></span>
                    </h5>
                </div>
                <div class="panel-body panel-one">
                    听海的声音
                    <span>我就是火</span>
                    <p>
                        slice(start,end)方法的使用
                        <a href="#">String</a>
                    </p>
                    <address class="location">
                        家住哪里呀，什么工作呀，年薪多少哎呦
                        <br/>
                        Written by <a href="mailto:webmaster@example.com">Donald Duck</a>.<br>
                        Visit us at:<br>
                        Example.com<br>
                        Box 564, Disneyland<br>
                        USA
                    </address>
                </div>
            </div>
            <div class="panel panel-warning">
                <div class="panel-heading">
                    <h5 class="panel-title">
                        把所有的春天 都揉进了一个清晨
                        <i class="glyphicon glyphicon-apple"></i>
                    </h5>
                </div>
                <div class="panel-body envelope-warp">
                    <h3 >你是我的唯一<i class="glyphicon glyphicon-heart-empty"></i></h3>
                    <p>
                        好想给你写封信。<a class="btn btn-default btn-sm right-single">右边单体</a>
                        &nbsp;
                        告诉你这里的天气。<a class="btn btn-success btn-sm right-clear">没有雾霾</a>
                    </p>
                    <p>
                        昨夜的那一场电影。<a class="btn btn-default btn-sm envelope-show">信封</a>
                        &nbsp;
                        还有我的心情。<a class="btn btn-success btn-sm envelope-hide"><i class="glyphicon glyphicon-envelope"></i>文字</a>
                    </p>
                    <ul class="input-demo">
                        <li class="list1">好饿</li>
                        <li class="list2">吃饭</li>
                        <li class="list3">睡觉</li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="panel panel-success">
                <div class="panel-heading">
                    <h4 class="panel-title">
                        总有一些歌，唱的都是你
                        <span class="glyphicon glyphicon-chevron-down pull-right"></span>
                    </h4>
                </div>
                <div class="panel-body panel-collapse panel-two">
                    孤独的心，诠释诗和远方
                    <a href="#" class="phone">
                        <i class="glyphicon glyphicon-phone"></i>
                    </a>
                    <div class="song">
                    	<span class="glyphicon glyphicon-heart-empty"></span>
                    	我在二环的里面 想着你<br>
                    	你在远方的山上 春风十里
                    	今天的风吹向你 下了雨
                    	我说<br>
                    	所有的酒，都不如你
                    	<span class="glyphicon glyphicon-heart pull-right"></span>
                    	<p>
                    		<a class="btn btn-danger">鹿先生</a>
                    		<a class="btn btn-danger guan">所有的酒</a>
                    	</p>
                    	<p>
                    		<a class="btn btn-warning tantan">ma先生</a>
                    	</p>
                    </div>
                </div>
            </div>
            <div class="panel panel-success">
                <div class="panel-heading">
                    <h3 class="panel-title">学习面向对象编程</h3>
                </div>
                <div class="panel-body oop">
                    <ul>
                        <li id="1">涛哥：</li>
                        <li id="2">延鹏：</li>
                        <li id="3">郜林：</li>
                    </ul>
                </div>
            </div>
            <div class="panel panel-success">
                <div class="panel-heading">
                    <h3 class="panel-title">学习面向对象编程--继承父类</h3>
                </div>
                <div class="panel-body inherit">
                    <ul>
                        <li id="4">
                            <h4>我在二环路的里面 想着你</h4>
                            <div></div>
                        </li>
                        <li id="5">
                            <h4>你在远方的山上 春风十里</h4>
                            <div></div>
                        </li>
                        <li id="6">
                            <h4>对面的风吹向你 下了雨</h4>
                            <div></div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <script src="../lib/jquery-1.12.1.min.js"></script>
    <script src="../js/index.js"></script>
    <script>
        $(function(){
            function Base(name,age){
                this.name = name;
                this.age = age;
            }
            Base.prototype.say = function(){
                console.log('I`m ' + this.name);
            };
            Base.prototype.set = function(name){
                this.name = name;
            };

            var aa = new Base("leexing");
            aa.say();

            function Student(name, age, grade){
                Base.call(this,name,age);
                this.grade = grade;
            }
            Student.prototype = new Base();
            Student.prototype.say = function(){
                console.log('hello '+ this.name);
            };
            console.log(Student.prototype);
            var ss = new Student('jiang',45,9);
            console.log(ss);
            ss.say();

            var Person = function(name){
                this.name = name;
            };
            console.info(Person.prototype);
            console.info(Person.__proto__);
            console.info(Person.__proto__ == Person.prototype);
            console.info(typeof Person);
            console.log("----------------------------")
            var p = new Person("小李");
            console.info(p.name);
            console.info(typeof p);
            console.info(p.__proto__);
            console.info(p.prototype);
            console.info(p.constructor);


            //单题模式---弹出框! js真的越来越有趣了
            var createWindow = (function(){
                var div;
                return function(){
                    if(!div){
                        /*div = document.createElement("div");
                        div.className = "alert-layer";
                        div.innerHTML = "今天你好漂亮";
                        div.style.display = 'none';
                        document.body.appendChild(div);*/

                        div = $('<div class="alert-layer">您好漂亮</div>');
                        //不能简单的写成 div = '<div class="alert-layer">您好漂亮</div>';会影响后面的操作，因为获取不到元素
                        $("body").append(div);
                        return div;
                    }
                    else{
                        console.log("已经存在一个弹窗！");
                        console.log(div);
                        return div;
                    }
                }
            })();
            $(".tantan").click(function(){
                var win = createWindow();
                $(win).show();
//                win.style.display = "block";
            });
            $(".guan").click(function(){
                var win = createWindow();
                $(win).hide();
//                win.style.display = "none";
            })
        });

        $(function(){
            //面向对象编程初始化
            $(".oop li").each(function(){
                new PlaceFiledEditor($(this).attr("id"), "请输入你喜欢的歌曲...", $(this));
            });

            //子类继承之前的父类 初始化
//            console.log(PlaceAreaEditor.prototype)
            $(".inherit li div").each(function(){
                new PlaceAreaEditor($(this).parent().attr("id"), '请留言...', $(this));
            });
        });

        $(function(){
            var SingleTon = function(fn){
                var result;
                return function(){
                    return result || (result = fn.call(this,arguments));
                }
            };
            var CreateRightAlertFun = function(){
                var div = document.createElement("div");
                    div.className = "alert-r";
                    var h3 = document.createElement("h3");
                    h3.style.cssText = "text-align:center;background:#f90;color:#fff";
                    h3.appendChild(document.createTextNode("说声好久不见，沉默了"));
                    div.appendChild(h3);
                    document.body.appendChild(div);
                return div;
            };
            var CreateEnvelope = function(){
                var envelope = document.createElement("p");
                envelope.classList = 'bg-success';
                envelope.style.cssText = "padding:10px 8px;font-size:18px";
                var spanEle = document.createElement("span");
                spanEle.classList = "glyphicon glyphicon-earphone";
                spanEle.style.cssText = "margin-right:10px;";
                envelope.appendChild(spanEle);
                envelope.appendChild(document.createTextNode("You are my only one"));
                document.getElementsByClassName("envelope-warp")[0].appendChild(envelope);
                return envelope;
            };
            //直接可以用的单体，缺点是不能实现通用化
            var CreateRightAlert = (function(){
                var Alert_R;
                return function(){
                    if(!Alert_R){
                        Alert_R = document.createElement("div");
                        Alert_R.className = "alert-r";
                        var h3 = document.createElement("h3");
                        h3.style.cssText = "text-align:center;background:#f90;color:#fff";
                        h3.appendChild(document.createTextNode("说声好久不见，沉默了"));
                        Alert_R.appendChild(h3);
                        document.body.appendChild(Alert_R);
                        console.log(45)
                    }
                    return Alert_R;
                }
            })();
            var div_R = SingleTon(CreateRightAlertFun);
            $(".right-single").on("click",function(){
                var Alert_R = div_R();
                Alert_R.style.display = "block";
            });
            $(".right-clear").on("click",function(){
                var Alert_R = div_R();
                Alert_R.style.display = "none";
            });

            var Envelope = SingleTon(CreateEnvelope);
            $(".envelope-show").on("click",function(){
                var envelope = Envelope();
                envelope.style.display = "block";
            });
            $(".envelope-hide").on("click",function(){
                var envelope = Envelope();
                envelope.style.display = "none";
            });

            var InputField = function(id,value,parentEle){
                this.element = document.createElement("div");
                this.element.id = id;
                this.parent = parentEle;
                this.value = value;
                this.originValue = value;

                this.initElement();
                this.initEvent();
                this.converToRead();
            };
            InputField.prototype = {
                initElement:function(){
                    this.spanEle = document.createElement("span");
                    this.spanEle.style.display = "inline-block";
                    this.spanEle.appendChild(document.createTextNode(this.value));

                    this.inputEle = document.createElement("input");
                    this.inputEle.style.display = "inline-block";
                    this.inputEle.type = "text";
                    this.inputEle.value = this.value;

                    this.BtnWrap = document.createElement("div");
                    this.BtnWrap.style.display = "inline-block";
                    this.saveBtn = document.createElement("a");
                    this.saveBtn.classList = "btn btn-default btn-sm";
                    this.saveBtn.appendChild(document.createTextNode("保存"));
                    this.cancelBtn = document.createElement("a");
                    this.cancelBtn.classList = "btn btn-default btn-sm";
                    this.cancelBtn.appendChild(document.createTextNode("取消"));
                    this.BtnWrap.appendChild(this.saveBtn);
                    this.BtnWrap.appendChild(this.cancelBtn);
                    this.parent.append(this.spanEle).append(this.inputEle).append(this.BtnWrap);
                },
                initEvent:function(){
                    var that = this;
                    this.spanEle.addEventListener("click",function(){
                        that.converToWrite();
                    },false);
                    this.saveBtn.addEventListener("click",function(){
                        that.save();
                    },false);
                    this.cancelBtn.addEventListener("click",function(){
                        that.cancel();
                    },false);
                },
                converToRead:function(){
                    this.spanEle.style.display = "block";
                    this.inputEle.style.display = "none";
                    this.BtnWrap.style.display = "none";
                },
                converToWrite:function(){
                    this.inputEle.value = this.getValue();
                    this.spanEle.style.display = "none";
                    this.inputEle.style.display = "block";
                    this.BtnWrap.style.display = "block";
                },
                save:function(){
                    this.setValue(this.inputEle.value);
                    if(this.value == ""){
                        this.setValue(this.originValue);
                    }
                    this.spanEle.innerText = this.getValue();
                    this.converToRead();
                },
                cancel:function(){
                    this.converToRead();
                },
                getValue:function(){
                    return this.value;
                },
                setValue:function(value){
                    this.value = value;
                },
                getElement:function(){
                    return this.element;
                }
            };

            $(".input-demo li").each(function(index,elem){
                $(this).append(new InputField(index,"哈利路亚",$(this)));
            })

        });

    </script>
</body>
</html>