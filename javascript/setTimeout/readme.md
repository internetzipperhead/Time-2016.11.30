# 解决 setInterval 时间间隔不准的问题

## 问题产生的原因

setInterval 和 setTimeout 一样，只是把某段代码在延迟一段时间之后「加入队列」等待执行，但不能保证一定在确定的时间点被运行，这是由于 JavaScript 的单线程特性，代码逻辑、UI、交互等等都是在抢一个线程即 UI 线程。可以简单的理解为，setInterval 就是被重复执行的 setTimeout，而他们的作用是把你的代码「送到未来的某个点加入到队列」，但如果加入队列后，有其他的代码逻辑正在执行，那么就要排队等待了。它只能保证代码被加入到队列但不能保证被实时执行，就是出现时间误差的原因。

## 解决方法

根据时间差来计算当前需要移动到的距离，而不是根据速度。递归调用setTimeout，而不是setInterval。setInterval在调用一些执行时间超出时间间隔的函数时会将后续函数加入队列，造成总时间不稳定。递归调用setTimeout可以保证某次函数、动画执行完毕后，再进行下一帧动画。
