# inter-Q&A

> 问题和答案放在一起

## 第一批

REFER: https://juejin.im/post/5cb0315f518825215e61ec14

### 2019-05-21

> （开放题）2万小球问题：在浏览器端，用js存储2万个小球的信息，包含小球的大小，位置，颜色等，如何做到对这2万条小球信息进行最优`检索`和`存储`

#### A:

1. 熟悉的 `indexedDB` 实现动态存储扩充浏览器的虚拟容量
2. 使用 `ArrayBuffer` 实现机制存储
3. 用bit-map实现大数据筛查
4. 用hash索引实现简单快捷的检索

### 2019-05-20

> (开放题）100亿排序问题：内存不足，一次只允许你装载和操作1亿条数据，如何对100亿条数据进行排序。

```js
0. 把这100亿的int型数据以文件形式存储到100个小文件中

1. 对这100个小文件分别读取后排序再存入
2. 遍历排序后对100个小文件，每个小文件里面取第一个数字, 组成一个100大数的堆
  2.1. new个空的大文件存最后的结果
3. 之后出100个数的那个堆,找到对应的小文件取数字,写入大文件, 记得flash, gc之类的
4. 循环3, 等所有的小文件都取完, 大文件就是存的最后结果
```

### 2019-05-19

REFER: https://github.com/airuikun/Weekly-FE-Interview/issues/19

> （开放题）a.b.c.d和a['b']['c']['d']，哪个性能更高

别看这题，题目上每个字都能看懂，但是里面涉及到的知识，暗藏杀鸡
这题要往深处走，会涉及ast抽象语法树、编译原理、v8内核对原生js实现问题

```js
这个题从AST角度看就很简单了，a['b']['c']和a.b.c，转换成AST前者的的树是含计算的，后者只是string literal，天然前者会消耗更多的计算成本，时间也更长
```

### 2019-05-18

> http的状态码中，499是什么？如何出现499，如何排查跟解决

499对应的是 “client has closed connection”，客户端请求等待链接已经关闭，这很有可能是因为服务器端处理的时间过长，客户端等得“不耐烦”了。还有一种原因是两次提交post过快就会出现499。
解决方法：

* 前端将timeout最大等待时间设置大一些
* nginx上配置proxy_ignore_client_abort on;

如果你用nodejs去实现爬虫 在生产环境上去爬定时爬接口和一些大型网站 很容易出现499 一般面试官会试着问一下你懂不懂499 如果懂的话 就会为怎么出现的 你是做什么项目出现的 然后引导你去说爬虫 + nodejs 一条路问下去

499 是 nginx 自定义的 code，一个可能出现的场景是：

  当用户准备提交，请求已经到了服务器的程序端，而在服务器返回之前，用户断开网路，所以返回无法到达客户端。 而浏览器在断开链接的时候，又重新发送了一次请求

### git时光机问题

很多面试候选人对git只会commit、pull、push

但是有没有使用过reflog、cherry-pick等等，这些都很能体现出来你对代码管理的灵活程度和代码质量管理。

## 第二批